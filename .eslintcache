[{"C:\\git\\chat-app\\src\\index.js":"1","C:\\git\\chat-app\\src\\reportWebVitals.js":"2","C:\\git\\chat-app\\src\\App.js":"3","C:\\git\\chat-app\\src\\page\\auth\\Login.js":"4","C:\\git\\chat-app\\src\\page\\chat\\Chat.js":"5","C:\\git\\chat-app\\src\\common\\store.js":"6","C:\\git\\chat-app\\src\\page\\auth\\style\\style.js":"7","C:\\git\\chat-app\\src\\page\\auth\\components\\Form.js":"8","C:\\git\\chat-app\\src\\page\\auth\\Register.js":"9","C:\\git\\chat-app\\src\\firebase.js":"10","C:\\git\\chat-app\\src\\page\\auth\\state\\index.js":"11","C:\\git\\chat-app\\src\\common\\redux-helper.js":"12","C:\\git\\chat-app\\src\\page\\chat\\components\\MainPanel\\MainPanel.js":"13","C:\\git\\chat-app\\src\\page\\chat\\components\\SidePanel\\SidePanel.js":"14","C:\\git\\chat-app\\src\\page\\chat\\components\\SidePanel\\ChatRooms.js":"15","C:\\git\\chat-app\\src\\page\\chat\\components\\SidePanel\\DirectMessages.js":"16","C:\\git\\chat-app\\src\\page\\chat\\components\\SidePanel\\Favorited.js":"17","C:\\git\\chat-app\\src\\page\\chat\\components\\SidePanel\\UserPanel.js":"18","C:\\git\\chat-app\\src\\page\\chat\\components\\MainPanel\\MessageHeader.js":"19","C:\\git\\chat-app\\src\\page\\chat\\components\\MainPanel\\MessageForm.js":"20","C:\\git\\chat-app\\src\\common\\components\\Loader.js":"21","C:\\git\\chat-app\\src\\common\\hooks\\useAuthCheck.js":"22","C:\\git\\chat-app\\src\\page\\chat\\state\\index.js":"23","C:\\git\\chat-app\\src\\page\\chat\\hooks\\useChatRoomsObserver.js":"24","C:\\git\\chat-app\\src\\page\\chat\\style\\Button.js":"25","C:\\git\\chat-app\\src\\page\\chat\\components\\MainPanel\\Message.js":"26","C:\\git\\chat-app\\src\\page\\chat\\style\\MessagesContainer.js":"27"},{"size":793,"mtime":1607428540169,"results":"28","hashOfConfig":"29"},{"size":375,"mtime":1607348328735,"results":"30","hashOfConfig":"29"},{"size":983,"mtime":1607531173107,"results":"31","hashOfConfig":"29"},{"size":2180,"mtime":1607526403277,"results":"32","hashOfConfig":"29"},{"size":407,"mtime":1607438317538,"results":"33","hashOfConfig":"29"},{"size":660,"mtime":1607630192218,"results":"34","hashOfConfig":"29"},{"size":2438,"mtime":1607425445526,"results":"35","hashOfConfig":"29"},{"size":447,"mtime":1607374803182,"results":"36","hashOfConfig":"29"},{"size":4530,"mtime":1607532229419,"results":"37","hashOfConfig":"29"},{"size":735,"mtime":1607423503668,"results":"38","hashOfConfig":"29"},{"size":1336,"mtime":1607547335350,"results":"39","hashOfConfig":"29"},{"size":1015,"mtime":1607535835517,"results":"40","hashOfConfig":"29"},{"size":3436,"mtime":1607964192596,"results":"41","hashOfConfig":"29"},{"size":555,"mtime":1607438497670,"results":"42","hashOfConfig":"29"},{"size":4383,"mtime":1607974440073,"results":"43","hashOfConfig":"29"},{"size":3250,"mtime":1607974797140,"results":"44","hashOfConfig":"29"},{"size":104,"mtime":1607438339262,"results":"45","hashOfConfig":"29"},{"size":2771,"mtime":1607548007456,"results":"46","hashOfConfig":"29"},{"size":2799,"mtime":1607904697617,"results":"47","hashOfConfig":"29"},{"size":4711,"mtime":1607904211876,"results":"48","hashOfConfig":"29"},{"size":1374,"mtime":1607526403275,"results":"49","hashOfConfig":"29"},{"size":773,"mtime":1607682296633,"results":"50","hashOfConfig":"29"},{"size":938,"mtime":1607973305193,"results":"51","hashOfConfig":"29"},{"size":2085,"mtime":1607804306583,"results":"52","hashOfConfig":"29"},{"size":828,"mtime":1607804306584,"results":"53","hashOfConfig":"29"},{"size":1579,"mtime":1607964192597,"results":"54","hashOfConfig":"29"},{"size":468,"mtime":1607888860702,"results":"55","hashOfConfig":"29"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},"kv8ama",{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"83","usedDeprecatedRules":"58"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"100","messages":"101","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"102","messages":"103","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"104","messages":"105","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"106","messages":"107","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"108","messages":"109","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"110","messages":"111","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},"C:\\git\\chat-app\\src\\index.js",[],["112","113"],"C:\\git\\chat-app\\src\\reportWebVitals.js",[],"C:\\git\\chat-app\\src\\App.js",[],"C:\\git\\chat-app\\src\\page\\auth\\Login.js",[],"C:\\git\\chat-app\\src\\page\\chat\\Chat.js",[],"C:\\git\\chat-app\\src\\common\\store.js",[],"C:\\git\\chat-app\\src\\page\\auth\\style\\style.js",[],"C:\\git\\chat-app\\src\\page\\auth\\components\\Form.js",[],"C:\\git\\chat-app\\src\\page\\auth\\Register.js",[],"C:\\git\\chat-app\\src\\firebase.js",[],"C:\\git\\chat-app\\src\\page\\auth\\state\\index.js",[],"C:\\git\\chat-app\\src\\common\\redux-helper.js",[],"C:\\git\\chat-app\\src\\page\\chat\\components\\MainPanel\\MainPanel.js",["114"],"import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport MessageForm from './MessageForm';\r\nimport MessageHeader from './MessageHeader';\r\nimport firebase from './../../../../firebase';\r\nimport { useSelector } from 'react-redux';\r\nimport Message from './Message';\r\nimport { MessagesContainer } from './../../style/MessagesContainer';\r\n\r\n/**\r\n * 채팅 메인 화면\r\n */\r\nexport default function MainPanel() {\r\n  const messageRef = useRef(null);\r\n  messageRef.current = firebase.database().ref('messages');\r\n\r\n  const [messages, setMessages] = useState([]);\r\n  const chatRoom = useSelector(state => state.chatRoom.currentChatRoom);\r\n  const user = useSelector(state => state.auth.currentUser);\r\n\r\n  // ? 옵져버를 통해서 채팅 메세지 감시\r\n  const addMessageListeners = useCallback(id => {\r\n    let messagesArray = [];\r\n    setMessages([]); // 채팅방 이동시 상태값 초기화\r\n    messageRef.current.child(id).on('child_added', DataSnapshot => {\r\n      // console.log('메세지 불러오는 중...');\r\n      messagesArray.push(DataSnapshot.val());\r\n      // console.log('data :', DataSnapshot.val());\r\n      // console.log('array :', messagesArray);\r\n\r\n      setMessages(prev => [...messagesArray]);\r\n      console.log('채팅 메세지 랜더링');\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (chatRoom) {\r\n      addMessageListeners(chatRoom.id);\r\n    }\r\n  }, [messages.length, chatRoom, addMessageListeners]);\r\n\r\n  // ---------- 검색어 관련 ---------------------------------------------------------- //\r\n\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [searchResult, setSearchResult] = useState([]);\r\n  const [searchLoading, setSearchLoading] = useState(false);\r\n\r\n  // 검색창 이벤트 핸들러\r\n  const handleSearchChange = e => {\r\n    // TODO: ?, / 이런거 처리 따로 해줘야 할듯\r\n    setSearchTerm(e.target.value);\r\n    setSearchLoading(true);\r\n  };\r\n\r\n  // 검색 결과 필터링 하기\r\n  const handleSearchMessages = useCallback(() => {\r\n    const chatRoomMessages = [...messages];\r\n\r\n    try {\r\n      const regex = new RegExp(searchTerm, 'gi');\r\n      const results = chatRoomMessages.reduce((acc, message) => {\r\n        // 글 내용이나 작성자가 일치하면 검색 결과로 리턴한다.\r\n        if ((message.content && message.content.match(regex)) || message.user.name.match(regex)) {\r\n          acc.push(message);\r\n        }\r\n        return acc;\r\n      }, []);\r\n\r\n      setSearchResult(results);\r\n\r\n      setTimeout(() => {\r\n        setSearchLoading(false);\r\n      }, 1000);\r\n    } catch (error) {\r\n      console.error('정규 표현식에 맞는 escape 문자를 입력해야함');\r\n    }\r\n  }, [messages, searchTerm]);\r\n\r\n  useEffect(() => {\r\n    handleSearchMessages();\r\n    console.log('검색창 랜더링');\r\n  }, [searchTerm, handleSearchMessages]);\r\n\r\n  const renderMessages = messages =>\r\n    messages.length > 0 &&\r\n    messages.map(message => <Message key={message.timestamp} message={message} user={user} />);\r\n\r\n  // ---------- Rendering ------------------------------------------------------------------- //\r\n\r\n  return (\r\n    <div style={{ padding: '2rem 2rem 0 2rem' }}>\r\n      <MessageHeader onChange={handleSearchChange} />\r\n\r\n      <MessagesContainer>\r\n        {searchTerm ? renderMessages(searchResult) : renderMessages(messages)}\r\n      </MessagesContainer>\r\n\r\n      <MessageForm />\r\n    </div>\r\n  );\r\n}\r\n","C:\\git\\chat-app\\src\\page\\chat\\components\\SidePanel\\SidePanel.js",[],"C:\\git\\chat-app\\src\\page\\chat\\components\\SidePanel\\ChatRooms.js",[],"C:\\git\\chat-app\\src\\page\\chat\\components\\SidePanel\\DirectMessages.js",[],"C:\\git\\chat-app\\src\\page\\chat\\components\\SidePanel\\Favorited.js",[],"C:\\git\\chat-app\\src\\page\\chat\\components\\SidePanel\\UserPanel.js",[],"C:\\git\\chat-app\\src\\page\\chat\\components\\MainPanel\\MessageHeader.js",[],"C:\\git\\chat-app\\src\\page\\chat\\components\\MainPanel\\MessageForm.js",[],"C:\\git\\chat-app\\src\\common\\components\\Loader.js",[],"C:\\git\\chat-app\\src\\common\\hooks\\useAuthCheck.js",[],"C:\\git\\chat-app\\src\\page\\chat\\state\\index.js",[],"C:\\git\\chat-app\\src\\page\\chat\\hooks\\useChatRoomsObserver.js",[],"C:\\git\\chat-app\\src\\page\\chat\\style\\Button.js",[],"C:\\git\\chat-app\\src\\page\\chat\\components\\MainPanel\\Message.js",[],"C:\\git\\chat-app\\src\\page\\chat\\style\\MessagesContainer.js",[],{"ruleId":"115","replacedBy":"116"},{"ruleId":"117","replacedBy":"118"},{"ruleId":"119","severity":1,"message":"120","line":45,"column":10,"nodeType":"121","messageId":"122","endLine":45,"endColumn":23},"no-native-reassign",["123"],"no-negated-in-lhs",["124"],"no-unused-vars","'searchLoading' is assigned a value but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation"]